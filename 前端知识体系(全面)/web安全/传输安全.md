### HTTP传输窃听
web应用在前端和后端传输过程中的问题，链路：

浏览器 <--> 代理服务器 <--> 链路 <--> 服务器

传输链路窃听篡改

HTTP传输是明文传输：网络链路上的任何一个节点都可以转发和监听以及修改我们的请求，比如监听我们某一个请求，将这个请求代理到其他请求上去

怎样查看我们一个访问到达服务器需要经过哪些节点呢？其实可以通过traceroute命令来查看，这个命令是mac自带的。打开mac终端输入
traceroute www.baidu.com
如果返回结果中都是***，那么表示中间的节点服务器没有按我们想要的返回数据，但是在访问网站的时候会将数据转发

### HTTP窃听危害
- 窃听用户密码
- 窃听传输敏感信息，比如银行卡号，银行卡密码，手机号，身份证等

### HTTP篡改危害
- 插入广告，通常也是运营商插入的广告
- 重定向网站，比较常见的是运营商劫持
- 无法防御的XSS和CSRF攻击
- 局域网劫持：通过局域网劫持支付宝的网页，把局域网中的流量通过一些手段导到自己的机器，相当于自己的机器成了一个代理
或者说是网关，然后当用户访问支付宝网页的时候，那个网页其实是攻击者修改过的网页，也就是这个HTTP的返回给到用户的时候是经过了这个攻击者的机器的，这些机器会插入一些恶意代码，然后当用户在网页上输入支付宝账号密码时，攻击者就可以获取到了
- 公共WI-FI获取密码。

### HTTPS

#### 中间人攻击
浏览器要经过网络各节点才能到达服务器，那么在这个过程中，浏览器怎么知道传递给正确的人。有没有可能出现这样的一种情况，网络中中间某个节点，收到浏览器的信息，然后解密，篡改，再重新加密，最后发送给服务器。如果收到服务器的信息，解密，篡改再加密，最后再发送给浏览器。那么这个问题该怎么解决呢？这时候就引入了一个信任机制，即证书机制，来确定服务器身份。

#### 如何确定服务器身份
- CA。数字证书中心。负责分发证书，相当于身份证明
- 首先，浏览器有一个内置信任列表，可以知道哪些CA发出来的证书浏览器是可以信任的，如果有证书不是这些CA发出来的，
那浏览器就不信任。
- 服务器向CA申请证书。
- CA验证服务器域名，颁发证书
- 浏览器发起请求
- 服务器响应证书給浏览器
- 浏览器验证证书。

- 证书无法伪造
- 证书私钥不被泄露


https://www.sslforfree.com/

如果网站采用https，那么就要求所有的资源都要采用https，不能混合使用http和https。如果http和https混用的话，好像在ios系统会有问题

当使用https加密网站时，利用抓包工具比如anyproxy抓包时会发现，https**请求方法**不是GET或者POST这些，而是变成了CONNECT方法。
CONNECT请求就意味着看不到任何信息，实际上，这是HTTPS通过http代理的一种方式，它会通过http的一个connect方法建立一个通道，建立通道之后，直接通过这个通道通信，而不是通过明文的http